{% extends 'base.html' %}
{% load static %}
{% block title %} Ezberle {% endblock %}

{% block content %}
<div class="container container-home">

<div class="row">

    <div class="col-lg-3 col-sm-6 text-center">
        <div class="card card-shadow">
            <div><a href="https://www.merriam-webster.com/" target="_blank"><img class="card-img-top mx-auto" src="{% static 'img/merriam.png' %}" alt="Merriam Webster"></a></div>
            <div class="card-body home-card">
                <a id="word_1" class="wotd" href="{% url 'dictionary' word_mer.english %}" target="_blank">
                    {{ word_mer.english }}
                </a>
                {% if word_mer.turkish.all %}
                    <ul class="wotd-tr-list">
                    {% for tr in word_mer.turkish.all %}
                        <li>
                            {{ tr }}
                        </li>
                    {% endfor %}
                    </ul>
                {% else %}
                    <ul class="wotd-tr-list no-tr" >
                        (...)
                    </ul>
                {% endif %}
                <div class="home-card-footer">
                {% if word_mer.audio is not None %}
                    <div>
                        <span class="audio">
                            <i title="Dinle" data-id="1" class="material-icons">volume_up</i>
                        </span>
                    </div>
                    <audio id="au-1" src="{{word_mer.audio}}"></audio>
                {% else %}
                    <div>
                        <span class="audio"><i title="Ses mevcut değil" class="material-icons">volume_off</i>
                        </span>
                    </div>
                    <audio src=""></audio>
                {% endif %}
                {% if word_mer.turkish.all %}
                    {% if user.is_authenticated %}
                        {% if mer_exists %}
                            <div><button data-id="1" class="add-btn-home btn-after"><span>Kelime Eklendi</span></button></div>
                        {% else %}
                            <div><button data-id="1" class="add-btn-home btn-before"><span>Kelimeyi Ekle</span></button></div>
                        {% endif %}
                    {% else %}
                        <div><button class="add-btn-home btn-before" data-toggle="modal" data-target="#loginModal"><span>Kelimeyi Ekle</span></button></div>
                    {% endif %}
                {% else %}
                        {% if user.is_authenticated %}
                        {% if mer_exists %}
                            <div><button data-id="1" class="add-btn-home btn-after disabled not-allowed" disabled><span>Kelime Eklendi</span></button></div>
                        {% else %}
                            <div><button data-id="1" class="add-btn-home btn-before disabled not-allowed" disabled><span>Kelimeyi Ekle</span></button></div>
                        {% endif %}
                    {% else %}
                        <div><button class="add-btn-home btn-before disabled not-allowed" data-toggle="modal" data-target="#loginModal" disabled><span>Kelimeyi Ekle</span></button></div>
                    {% endif %}
                {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-3 col-sm-6 text-center">
        <div class="card card-shadow">
            <div><a href="https://www.oxfordlearnersdictionaries.com/" target="_blank"><img class="card-img-top mx-auto" src="{% static 'img/oxford.png' %}" alt="Oxford Dictionary"></a></div>
            <div class="card-body home-card">
                <a class="wotd" id="word_2" href="{% url 'dictionary' word_ox.english %}" target="_blank">
                    {{ word_ox.english }}
                </a>
                {% if word_ox.turkish.all %}
                    <ul class="wotd-tr-list">
                    {% for tr in word_ox.turkish.all %}
                        <li>
                            {{ tr }}
                        </li>
                    {% endfor %}
                    </ul>
                {% else %}
                    <ul class="wotd-tr-list no-tr" >
                        (...)
                    </ul>
                {% endif %}
                <div class="home-card-footer">
                {% if word_ox.audio is not None %}
                    <div>
                        <span class="audio">
                            <i title="Dinle" data-id="2" class="material-icons">volume_up</i>
                        </span>
                    </div>
                    <audio id="au-2" src="{{word_ox.audio}}"></audio>
                {% else %}
                    <div>
                        <span class="audio">
                            <i title="Ses mevcut değil" class="material-icons">volume_up</i>
                        </span>
                    </div>
                    <audio src=""></audio>
                {% endif %}
                {% if word_ox.turkish.all %}
                    {% if user.is_authenticated %}
                        {% if ox_exists %}
                            <div><button data-id="2" class="add-btn-home btn-after"><span>Kelime Eklendi</span></button></div>
                        {% else %}
                            <div><button data-id="2" class="add-btn-home btn-before"><span>Kelimeyi Ekle</span></button></div>
                        {% endif %}
                    {% else %}
                        <div><button class="add-btn-home btn-before" data-toggle="modal" data-target="#loginModal"><span>Kelimeyi Ekle</span></button></div>
                    {% endif %}
                {% else %}
                    {% if user.is_authenticated %}
                        {% if ox_exists %}
                            <div><button data-id="2" class="add-btn-home btn-after disabled not-allowed" disabled><span>Kelime Eklendi</span></button></div>
                        {% else %}
                            <div><button data-id="2" class="add-btn-home btn-before disabled not-allowed" disabled><span>Kelimeyi Ekle</span></button></div>
                        {% endif %}
                    {% else %}
                        <div><button class="add-btn-home btn-before disabled not-allowed" data-toggle="modal" data-target="#loginModal" disabled><span>Kelimeyi Ekle</span></button></div>
                    {% endif %}
                {% endif %}
                    </div>
            </div>
        </div>
    </div>

    <div class="col-lg-3 col-sm-6 text-center mb-sm-2">
        <div class="card card-shadow">
            <div><a href="https://www.dictionary.com/" target="_blank"><img class="card-img-top mx-auto dict" src="{% static 'img/dictionary.jpg' %}" alt="Dictionary"></a></div>
            <div class="card-body home-card">
                <a class="wotd" id="word_3" href="{% url 'dictionary' word_dict.english %}" target="_blank">
                    {{ word_dict.english }}
                </a>
                {% if word_dict.turkish.all %}
                    <ul class="wotd-tr-list">
                    {% for tr in word_dict.turkish.all %}
                        <li>
                            {{ tr }}
                        </li>
                    {% endfor %}
                    </ul>
                {% else %}
                    <ul class="wotd-tr-list no-tr" >
                        (...)
                    </ul>
                {% endif %}
                <div class="home-card-footer">
                {% if word_dict.audio is not None %}
                <div>
                    <span class="audio">
                        <i title="Dinle" data-id="3" class="material-icons">volume_up</i>
                    </span>
                </div>
                <audio id="au-3" src="{{word_dict.audio}}"></audio>
                {% else %}
                <div>
                    <span class="audio">
                        <i title="Ses mevcut değil" class="material-icons">volume_off</i>
                    </span>
                </div>
                <audio src=""></audio>
                {% endif %}
                {% if word_dict.turkish.all %}
                    {% if user.is_authenticated %}
                        {% if dict_exists %}
                            <div><button data-id="3" class="add-btn-home btn-after"><span>Kelime Eklendi</span></button></div>
                        {% else %}
                            <div><button data-id="3" class="add-btn-home btn-before"><span>Kelimeyi Ekle</span></button></div>
                        {% endif %}
                    {% else %}
                        <div><button class="add-btn-home btn-before" data-toggle="modal" data-target="#loginModal"><span>Kelimeyi Ekle</span></button></div>
                    {% endif %}
                {% else %}
                    {% if user.is_authenticated %}
                        {% if dict_exists %}
                            <div><button data-id="3" class="add-btn-home btn-after disabled not-allowed" disabled><span>Kelime Eklendi</span></button></div>
                        {% else %}
                            <div><button data-id="3" class="add-btn-home btn-before disabled not-allowed" disabled><span>Kelimeyi Ekle</span></button></div>
                        {% endif %}
                    {% else %}
                        <div><button class="add-btn-home btn-before disabled not-allowed" data-toggle="modal" data-target="#loginModal" disabled><span>Kelimeyi Ekle</span></button></div>
                    {% endif %}
                {% endif %}
                    </div>
            </div>
        </div>
    </div>

    <div class="col-lg-3 col-sm-6 text-center mb-sm-2 mb-2">
        <div class="card card-shadow">
            <div><a href="https://dictionary.cambridge.org/" target="_blank"><img class="card-img-top mx-auto" src="{% static 'img/cambridge.png' %}" alt="Merriam Webster"></a></div>
            <div class="card-body home-card">
                <a class="wotd" id="word_4" href="{% url 'dictionary' word_camb.english %}" target="_blank">
                    {{ word_camb.english }}
                </a>
                {% if word_camb.turkish.all %}
                    <ul class="wotd-tr-list">
                    {% for tr in word_camb.turkish.all %}
                        <li>
                            {{ tr }}
                        </li>
                    {% endfor %}
                    </ul>
                {% else %}
                    <ul class="wotd-tr-list no-tr" >
                        (...)
                    </ul>
                {% endif %}
                <div class="home-card-footer">
                {% if word_camb.audio is not None %}
                    <div>
                        <span class="audio">
                            <i title="Dinle" data-id="4" class="material-icons">volume_up</i>
                        </span>
                    </div>
                    <audio id="au-4" src="{{word_camb.audio}}"></audio>
                {% else %}
                    <div>
                        <span class="audio">
                            <i title="Ses mevcut değil" class="material-icons">volume_off</i>
                        </span>
                    </div>
                    <audio src=""></audio>
                {% endif %}
                {% if word_camb.turkish.all %}
                    {% if user.is_authenticated %}
                        {% if camb_exists %}
                            <div><button data-id="4" class="add-btn-home btn-after"><span>Kelime Eklendi</span></button></div>
                        {% else %}
                            <div><button data-id="4" class="add-btn-home btn-before"><span>Kelimeyi Ekle</span></button></div>
                        {% endif %}
                    {% else %}
                        <div><button class="add-btn-home btn-before" data-toggle="modal" data-target="#loginModal"><span>Kelimeyi Ekle</span></button></div>
                    {% endif %}
                {% else %}
                    {% if user.is_authenticated %}
                        {% if camb_exists %}
                            <div><button data-id="4" class="add-btn-home btn-after disabled not-allowed" disabled><span>Kelime Eklendi</span></button></div>
                        {% else %}
                            <div><button data-id="4" class="add-btn-home btn-before disabled not-allowed" disabled><span>Kelimeyi Ekle</span></button></div>
                        {% endif %}
                    {% else %}
                        <div><button class="add-btn-home btn-before disabled not-allowed" data-toggle="modal" data-target="#loginModal" disabled><span>Kelimeyi Ekle</span></button></div>
                    {% endif %}
                {% endif %}
                </div>
            </div>
        </div>
    </div>

</div>

<div class="row">
    <div class="col-lg-3 col-sm-6">
        <div class="card card-note cn-1c">
            <div class="text-center"><span class="title-home title-last">Son Eklenenler</span></div>
            <div class="overflow-auto">
                <ul class="ul-last-added">
                    {% for word in last_words %}
                    <li>
                        <a href="{% url 'dictionary' word.english %}" target="_blank">{{ word.english }}</a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

    <div class="cn-2p col-lg-3 col-sm-6 mb-6">
        <div class="cn-2c card card-note">
            <span class="title-home title-db">Biliyor muydun?</span>
            <div class="overflow-auto position-relative">
                <ul class="ul-db">
                    {% for word in random_db %}
                    <li>
                        <a href="{% url 'dictionary' word %}" target="_blank">{{ word }}</a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
            {% if user.is_authenticated %}
            <div class="ref-resp">
                <div class="swing refresh">
                    <div class="object-rope"></div>
                    <button class="object-content ref ref-db">
                        <img class="ref-img ref-img-db" src="{% static 'img/ref-arrow-teal.png' %}" alt="yenile" height="24px" width="24px">
                    </button>
                </div>
            </div>
            <div class="quiz-resp">
                <div class="swing quiz">
                    <div class="object-rope"></div>
                    <button class="object-content" type="button" data-toggle="modal" data-target="#quiz-db">
                        Quiz
                    </button>
                </div>
            </div>
            {% else %}
            <div class="ref-resp">
                <div class="swing refresh">
                    <div class="object-rope"></div>
                    <button class="object-content" type="button" data-toggle="modal" data-target="#loginModal">
                        <img class="ref-img ref-img-db" src="{% static 'img/ref-arrow-teal.png' %}" alt="yenile" height="24px" width="24px">
                    </button>
                </div>
            </div>
            <div class="quiz-resp">
                <div class="swing quiz">
                    <div class="object-rope"></div>
                    <button class="object-content" type="button" data-toggle="modal" data-target="#loginModal">
                        Quiz
                    </button>
                </div>
            </div>
            {% endif %}
        </div>
    </div>


    <div class="cn-3p col-lg-3 col-sm-6 mb-6">
        <div class="cn-3c card card-note">
            <span class="title-home title-unl">Öğreneceklerim</span>
            <div class="overflow-auto position-relative">
                <ul class="ul-unlearned">
                    {% for word in random_unl %}
                    <li>
                        <a href="{% url 'dictionary' word %}" target="_blank">{{ word }}</a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
            {% if user.is_authenticated %}
            <div class="ref-resp">
                <div class="swing refresh">
                    <div class="object-rope"></div>
                    <button class="object-content ref ref-unl">
                        <img class="ref-img ref-img-unl" src="{% static 'img/ref-arrow-teal.png' %}" alt="yenile" height="24px" width="24px">
                    </button>
                </div>
            </div>
            <div class="quiz-resp">
                <div class="swing quiz">
                    <div class="object-rope"></div>
                    <button class="object-content" type="button" data-toggle="modal" data-target="#quiz-unl">
                        Quiz
                    </button>
                </div>
            </div>
            {% else %}
            <div class="ref-resp">
                <div class="swing refresh">
                    <div class="object-rope"></div>
                    <button class="object-content" type="button" data-toggle="modal" data-target="#loginModal">
                        <img class="ref-img ref-img-unl" src="{% static 'img/ref-arrow-teal.png' %}" alt="yenile" height="24px" width="24px">
                    </button>
                </div>
            </div>
            <div class="quiz-resp">
                <div class="swing quiz">
                    <div class="object-rope"></div>
                    <button class="object-content" type="button" data-toggle="modal" data-target="#loginModal">
                        Quiz
                    </button>
                </div>
            </div>
            {% endif %}
        </div>
    </div>

    <div class="cn-4p col-lg-3 col-sm-6 mb-7">
        <div class="cn-4c card card-note">
            <span class="title-home title-l">Öğrendiklerim</span>
            <div class="overflow-auto position-relative">
                <ul class="ul-learned">
                    {% for word in random_l %}
                    <li>
                        <a href="{% url 'dictionary' word %}" target="_blank">{{ word }}</a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
            {% if user.is_authenticated %}
            <div class="ref-resp">
                <div class="swing refresh">
                    <div class="object-rope"></div>
                    <button class="object-content ref ref-l">
                        <img class="ref-img ref-img-l" src="{% static 'img/ref-arrow-teal.png' %}" alt="yenile" height="24px" width="24px">
                    </button>
                </div>
            </div>
            <div class="quiz-resp">
                <div class="swing quiz">
                    <div class="object-rope"></div>
                    <button class="object-content" type="button" data-toggle="modal" data-target="#quiz-l">
                        Quiz
                    </button>
                </div>
            </div>
            {% else %}
            <div class="ref-resp">
                <div class="swing refresh">
                    <div class="object-rope"></div>
                    <button class="object-content" type="button" data-toggle="modal" data-target="#loginModal">
                        <img class="ref-img ref-img-l" src="{% static 'img/ref-arrow-teal.png' %}" alt="yenile" height="24px" width="24px">
                    </button>
                </div>
            </div>
            <div class="quiz-resp">
                <div class="swing quiz">
                    <div class="object-rope"></div>
                    <button class="object-content" type="button" data-toggle="modal" data-target="#loginModal">
                        Quiz
                    </button>
                </div>
            </div>
            {% endif %}
        </div>
    </div>

</div>

</div>

{% if show_reminder_notif %}
<div class="reminder">
    <img src="{% static 'img/reminder-1.svg' %}" alt="Hatırlatıcı">
</div>
{% else %}
<div class="reminder">
    <img src="{% static 'img/reminder.svg' %}" alt="Hatırlatıcı">
</div>
{% endif %}

<div class="notif"></div>

<div class="modal fade" id="quiz-db" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content modal-content-db py-4 px-sm-4 px-2">
        <span class="title-quiz">Günlük Quiz</span>
        <button type="button" class="close close-quiz" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <div class="modal-body modal-body-db">
          <div class="modal-body-content modal-body-content-db">
            <div>Günlük Quiz'e hoş geldin.</div>
            <div>Lütfen quiz'e başlamak için aşağıdan sorulmasını istediğin kelime sayısını seç.</div>
            <div >
              Not:
              <ul>
                <li>
                  Sorulacak olan kelimeler "Biliyor muydun?" listesinden rastgele seçilecektir.
                </li>
              </ul>
            </div>
            <div class="mt-4">
              <label for="quiz-db">Kelime sayısı:</label>
              <select id="sel-db" class="custom-select" name="Kelime sayısı">
                <option value="8">8</option>
                <option value="10">10</option>
                <option value="12">12</option>
              </select>
              <button class="btn-before start start-db">Başlat</button>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>

<div class="modal fade" id="quiz-unl" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content modal-content-unl py-4 px-sm-4 px-2">
        <span class="title-quiz">Günlük Quiz</span>
        <button type="button" class="close close-quiz" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <div class="modal-body modal-body-unl">
          <div class="modal-body-content modal-body-content-unl">
            <div>Günlük Quiz'e hoş geldin.</div>
            <div>Lütfen quiz'e başlamak için aşağıdan sorulmasını istediğin kelime sayısını seç.</div>
            <div >
              Not:
              <ul>
                <li>
                  Sorulacak olan kelimeler "öğreneceğim kelimeler" listesinden rastgele olarak seçilecektir.
                  Bu yüzden listende gerektiği kadar kelime olduğundan emin ol.
                  Listende şu an <span id="count_unl"></span> adet kelime var.
                </li>
                <li>
                  Bu quiz günde 1 defaya mahsustur ve her gün öğlen 12:00'de sıfırlanır.
                </li>
              </ul>
            </div>
            <div class="mt-4">
              <label for="quiz-unl">Kelime sayısı:</label>
              <select id="sel-unl" class="custom-select" name="Kelime sayısı">
                <option value="8">8</option>
                <option value="10">10</option>
                <option value="12">12</option>
              </select>
              <button class="btn-before start start-unl">Başlat</button>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>

<div class="modal fade" id="quiz-l" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content modal-content-l py-4 px-sm-4 px-2">
        <span class="title-quiz">Günlük Quiz</span>
        <button type="button" class="close close-quiz" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <div class="modal-body modal-body-l">
          <div class="modal-body-content modal-body-content-l">
            <div>Günlük Quiz'e hoş geldin.</div>
            <div>Lütfen quiz'e başlamak için aşağıdan sorulmasını istediğin kelime sayısını seç.</div>
            <div>
              Not:
              <ul>
                <li>
                  Sorulacak olan kelimeler "öğrendiğim kelimeler" listesinden rastgele olarak seçilecektir.
                  Bu yüzden listende gerektiği kadar kelime olduğundan emin ol.
                  Listende şu an <span id="count_l"></span> adet kelime var.
                </li>
                <li>
                  Vereceğin cevaplar kelimeyi listeye kaydettiğin Türkçe kelimelerden olmak zorundadır. Aksi halde
                  Türkçesi doğru olsa dahi kabul edilmez.
                </li>
                <li>
                  Her soruyu çözmek için 2 hakkın mevcut.
                </li>
                <li>
                  Bu quiz günde 1 defaya mahsustur ve her gün öğlen 12:00'de sıfırlanır.
                </li>
              </ul>
            </div>
            <div class="mt-4">
              <label for="sel-l">Kelime sayısı:</label>
              <select id="sel-l" class="custom-select" name="Kelime sayısı">
                <option value="8">8</option>
                <option value="10">10</option>
                <option value="12">12</option>
              </select>
              <button class="btn-before start start-l">Başlat</button>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>

{% if not user.is_authenticated %}
<div class="modal fade" id="loginModal">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content modal-login">
        <div class="modal-header">
          <h6 class="modal-title">Bu özelliğe erişmek için lütfen giriş yapın..</h6>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <div class="modal-body">
            <form class="login d-grid" action="/accounts/login/?next{{request.path}}" method="POST">
                {% csrf_token %}
                <input class="login-input" type="email" name="login" placeholder="Email Adresi..." required>
                <input class="login-input" type="password" name="password" placeholder="Kullanıcı Şifresi..." required>
                <div>
                    <label class="custom-cb" for="remember">Beni Hatırla:
                        <input id="remember" type="checkbox">
                        <span class="checkbox"></span>
                    </label>
                </div>
                <button type="submit" class="btn-before my-2 login-btn">Giriş Yap</button>
                <a href="{% url 'account_signup' %}">Kayıt ol</a>
                <a href="/accounts/password/reset">Şifremi Unuttum</a>
                <div class="socialaccount_ballot login-btn">
                  <ul class="socialaccount_providers">
                    {% include "socialaccount/snippets/provider_list.html" with process="login" %}
                  </ul>
                </div>
            </form>
        </div>
      </div>
    </div>
</div>
{% endif %}



<script>
$(function(){

    var timeoutId;

    function notifHide() {
        timeoutId = setTimeout(function(){
            $(".notif").removeClass("notif-show")
        }, 3000)
    }

    function stopNotif() {
        clearTimeout(timeoutId);
    }

    $(".object-content").click(function(){
        if ( $(this).attr("data-target") == "#quiz-unl" )
            $.ajax({
                type:"GET",
                url: "{% url 'word-count' %}",
                data: {
                    "count_unl": 1,
                },
                dataType: 'json',
                success: function(data) {
                    $("#count_unl").html(data.count_unl)
                }
            })
        else if ( $(this).attr("data-target") == "#quiz-l" ) {
            $.ajax({
                type:"GET",
                url: "{% url 'word-count' %}",
                data: {
                    "count_l": 1,
                },
                dataType: 'json',
                success: function(data) {
                    $("#count_l").html(data.count_l)
                }
            })
        }
    })

    function openReminder() {
        if ( !($(".reminder").hasClass("reminder-modal")) ) {
            $(".reminder").click()
            $.ajax({
                type:"GET",
                url: "{% url 'open-reminder' %}",
                dataType: 'json',
            })
        }
    }

    var open_reminder = "{{open_reminder_daily}}"
    var is_authenticated = "{{user.is_authenticated}}"
    var reminder_count = "{{reminder_count}}"
    setTimeout(function(){
        if (is_authenticated == "True") {
            if (open_reminder == "False" && reminder_count > 0) {
                openReminder()
            }
        }
    }, 5000)

    function closeReminder() {
        if ($('.reminder').hasClass("reminder-modal")) {
            $(document).click(function(e) {
                if ( $(e.target).closest('.reminder').length === 0 && !($(e.target).hasClass("fixed-top")) ) {
                    $(".times").click()
                }
            })
        }
    }

    $(document).click(function(){
        closeReminder()
    })

    $(".reminder").click(function(){
        if (is_authenticated == "True") {
            var ths = $(this)
            if ( !(ths.hasClass("reminder-modal")) ) {
                word_list = []
                quiz_db_list = []
                quiz_unl_list = []
                quiz_l_list = []
                $.ajax({
                    type:"GET",
                    url: "{% url 'get-reminder' %}",
                    data: {
                        'get-reminder': "get-reminder",
                    },
                    async:false,
                    dataType: 'json',
                    success: function(data) {
                        list = data.reminder_list
                        list.map(function(i){
                            word_list.push(i)
                        })
                        quiz_db = data.quiz_db
                        quiz_db.map(function(i){
                            quiz_db_list.push(i)
                        })
                        quiz_unl = data.quiz_unl
                        quiz_unl.map(function(i){
                            quiz_unl_list.push(i)
                        })
                        quiz_l = data.quiz_l
                        quiz_l.map(function(i){
                            quiz_l_list.push(i)
                        })
                    }
                })
                ths.addClass("reminder-modal py-4 px-sm-4 px-2").find("img").remove()
                setTimeout(function(){
                    ths.append(`
                                <span class="title-reminder">
                                    Hatırlatıcı
                                    <img src="{% static 'img/reminder.svg' %}" alt="Hatırlatıcı">
                                </span>
                                <div class="modal-body modal-body-reminder">
                                <div role="tabpanel">
                                    <ul class="nav nav-tabs">
                                        <li>
                                            <a class="nav-link active" data-toggle="tab" href="#kelimeler">
                                                <i class="fas fa-list-ol"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="nav-link" data-toggle="tab" href=".quiz-1">
                                                <i class="material-icons">filter_1</i>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="nav-link" data-toggle="tab" href=".quiz-2">
                                                <i class="material-icons">filter_2</i>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="nav-link" data-toggle="tab" href=".quiz-3">
                                                <i class="material-icons">filter_3</i>
                                            </a>
                                        </li>
                                    </ul>
                                    <div class="tab-content">
                                        <div id="kelimeler" class="tab-pane active">
                                            <ul class="modal-list"></ul>
                                        </div>
                                        <div class="tab-pane quiz-1">
                                            <ul class="modal-list"></ul>
                                        </div>
                                        <div class="tab-pane quiz-2">
                                            <ul class="modal-list"></ul>
                                        </div>
                                        <div class="tab-pane quiz-3">
                                            <ul class="modal-list"></ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="rem-tt">
                                    <i class="fas fa-question-circle"></i>
                                    <div class="tooltip-content">
                                        <div><i class="fas fa-list-ol"></i>Hatırlatıcıya kaydedilmiş kelimeler</div>
                                        <div><i class="material-icons">filter_1</i>En son olduğun "Öğreneceğim Kelimeler" quizinin sonuçları</div>
                                        <div><i class="material-icons">filter_2</i>En son olduğun "Öğrendiğim Kelimeler" quizinin sonuçları</div>
                                        <div><i class="material-icons">filter_3</i>En son olduğun "Biliyor muydun?" quizinin sonuçları</div>
                                    </div>
                                </div>
                                <div class="times"><span>&times;</span></div>
                                </div>`)
                                if (word_list.length > 0) {
                                    word_list.map(function(i){
                                        $("#kelimeler").find($(".modal-list"))
                                                       .append(`<li>
                                                                  <span>${i}</span>
                                                                  <div class="dropdown">
                                                                      <button class="btn-dd"
                                                                              type="button" id="dropdownReminder" data-toggle="dropdown"
                                                                              aria-haspopup="true" aria-expanded="false">
                                                                        <img src="{% static 'img/menu.png' %}" alt="Menu">
                                                                      </button>
                                                                      <div class="dropdown-menu" data-reminder="true" aria-labelledby="dropdownReminder">
                                                                        <a target="_blank" class="dropdown-item" href="/sözlük/q=${i}">
                                                                            <i class="fa fa-search"></i>
                                                                            Sözlükte arat
                                                                        </a>
                                                                        <a target="_blank" class="dropdown-item" href="/kelime_listesi/q=${i}">
                                                                            <i class="fas fa-clipboard-list"></i>
                                                                            Listende görüntüle
                                                                        </a>
                                                                        <a class="dropdown-item" href="#!">
                                                                            <i class="fas fa-bell"></i>
                                                                            <span>Hatırlatıcıdan kaldır</span>
                                                                        </a>
                                                                      </div>
                                                                  </div>
                                                                </li>`)
                                    })
                                } else {
                                    $("#kelimeler").find($(".modal-list"))
                                                       .append(`<li>
                                                                  <span>Hatırlatıcıya kelime kaydettiğinde burada gösterilir.</span>
                                                                </li>`)
                                }

                                if (quiz_unl_list.length > 0) {
                                    quiz_unl_list.map(function(i){
                                        if (i.is_correct) {
                                            $(".quiz-1").find("ul").append(`<li>
                                                                          <span class="correct">${i.english}</span>
                                                                          <div class="dropdown">
                                                                              <button class="btn-dd"
                                                                                      type="button" id="dropdownReminder" data-toggle="dropdown"
                                                                                      aria-haspopup="true" aria-expanded="false">
                                                                                <img src="{% static 'img/menu.png' %}" alt="Menu">
                                                                              </button>
                                                                              <div class="dropdown-menu" data-reminder="true" aria-labelledby="dropdownReminder">
                                                                                <a target="_blank" class="dropdown-item" href="/sözlük/q=${i.english}">
                                                                                    <i class="fa fa-search"></i>
                                                                                    Sözlükte arat
                                                                                </a>
                                                                                <a target="_blank" class="dropdown-item" href="/kelime_listesi/q=${i.english}">
                                                                                    <i class="fas fa-clipboard-list"></i>
                                                                                    Listende görüntüle
                                                                                </a>
                                                                              </div>
                                                                          </div>
                                                                        </li>`)
                                        } else {
                                            $(".quiz-1").find("ul").append(`<li>
                                                                          <span class="incorrect">${i.english}</span>
                                                                          <div class="dropdown">
                                                                              <button class="btn-dd"
                                                                                      type="button" id="dropdownReminder" data-toggle="dropdown"
                                                                                      aria-haspopup="true" aria-expanded="false">
                                                                                <img src="{% static 'img/menu.png' %}" alt="Menu">
                                                                              </button>
                                                                              <div class="dropdown-menu" data-reminder="true" aria-labelledby="dropdownReminder">
                                                                                <a target="_blank" class="dropdown-item" href="/sözlük/q=${i.english}">
                                                                                    <i class="fa fa-search"></i>
                                                                                    Sözlükte arat
                                                                                </a>
                                                                                <a target="_blank" class="dropdown-item" href="/kelime_listesi/q=${i.english}">
                                                                                    <i class="fas fa-clipboard-list"></i>
                                                                                    Listende görüntüle
                                                                                </a>
                                                                              </div>
                                                                          </div>
                                                                        </li>`)
                                        }
                                    })
                                } else {
                                    $(".quiz-1").find($(".modal-list"))
                                                       .append(`<li>
                                                                  <span>"Öğreneceğim Kelimeler" listesinden olduğun son quizin sonuçları burada gösterilir.</span>
                                                                </li>`)
                                }

                                if (quiz_l.length > 0) {
                                    quiz_l_list.map(function(i){
                                        if (i.is_correct) {
                                            $(".quiz-2").find("ul").append(`<li>
                                                                          <span class="correct">${i.english}</span>
                                                                          <div class="dropdown">
                                                                              <button class="btn-dd"
                                                                                      type="button" id="dropdownReminder" data-toggle="dropdown"
                                                                                      aria-haspopup="true" aria-expanded="false">
                                                                                <img src="{% static 'img/menu.png' %}" alt="Menu">
                                                                              </button>
                                                                              <div class="dropdown-menu" data-reminder="true" aria-labelledby="dropdownReminder">
                                                                                <a target="_blank" class="dropdown-item" href="/sözlük/q=${i.english}">
                                                                                    <i class="fa fa-search"></i>
                                                                                    Sözlükte arat
                                                                                </a>
                                                                                <a target="_blank" class="dropdown-item" href="/kelime_listesi/q=${i.english}">
                                                                                    <i class="fas fa-clipboard-list"></i>
                                                                                    Listende görüntüle
                                                                                </a>
                                                                              </div>
                                                                          </div>
                                                                        </li>`)
                                        } else {
                                            $(".quiz-2").find("ul").append(`<li>
                                                                          <span class="incorrect">${i.english}</span>
                                                                          <div class="dropdown">
                                                                              <button class="btn-dd"
                                                                                      type="button" id="dropdownReminder" data-toggle="dropdown"
                                                                                      aria-haspopup="true" aria-expanded="false">
                                                                                <img src="{% static 'img/menu.png' %}" alt="Menu">
                                                                              </button>
                                                                              <div class="dropdown-menu" data-reminder="true" aria-labelledby="dropdownReminder">
                                                                                <a target="_blank" class="dropdown-item" href="/sözlük/q=${i.english}">
                                                                                    <i class="fa fa-search"></i>
                                                                                    Sözlükte arat
                                                                                </a>
                                                                                <a target="_blank" class="dropdown-item" href="/kelime_listesi/q=${i.english}">
                                                                                    <i class="fas fa-clipboard-list"></i>
                                                                                    Listende görüntüle
                                                                                </a>
                                                                              </div>
                                                                          </div>
                                                                        </li>`)
                                        }
                                    })
                                } else {
                                    $(".quiz-2").find("ul").append(`<li>
                                                                        <span>"Öğrendiğim Kelimeler" listesinden olduğun son quizin sonuçları burada gösterilir.</span>
                                                                    </li>`)
                                }

                                if (quiz_db.length > 0) {
                                    quiz_db_list.map(function(i){
                                        if (i.is_correct) {
                                            $(".quiz-3").find("ul").append(`<li>
                                                                              <span class="correct">${i.english}</span>
                                                                              <a target="_blank" href="/sözlük/q=${i.english}">
                                                                                <i class="fa fa-search"></i>
                                                                              </a>
                                                                            </li>`)
                                        } else {
                                            $(".quiz-3").find("ul").append(`<li>
                                                                              <span class="incorrect">${i.english}</span>
                                                                              <a target="_blank" href="/sözlük/q=${i.english}">
                                                                                <i class="fa fa-search"></i>
                                                                              </a>
                                                                            </li>`)
                                        }
                                    })
                                } else {
                                    $(".quiz-3").find("ul").append(`<li>
                                                                        <span>"Biliyor muydun?" listesinden olduğun son quizin sonuçları burada gösterilir.</span>
                                                                    </li>`)
                                }

                }, 700)
            }
        } else {
            $("#loginModal").modal()
        }
    })

    $(document).on("click", ".times", function(){
        var ths = $(this)
        ths.parent().parent().find("span").remove()
        ths.parent().parent().find("div[role]").remove()
        ths.parent().parent().removeClass("reminder-modal py-4 px-sm-4 px-2")
        ths.parent().parent().append(`<img src="{% static 'img/reminder.svg' %}" alt="Hatırlatıcı">`)
        ths.prev().remove()
        $(".modal-body-reminder").remove()
        ths.remove()
    })

    $(".object-content").hover(
        function(){
            $(this).find("img").attr("src", "/static/img/ref-arrow-white.png")
        },
        function(){
            $(this).find("img").attr("src", "/static/img/ref-arrow-teal.png")
        },
    )

    $(".start").click(function() {
        if(!event.detail || event.detail == 1) {
            var ths = $(this)
            if (ths.hasClass("start-db")) {
                if ( "{{is_quiz_db_finished}}" == "False" ) {
                    $.ajax({
                        type:"POST",
                        url: "{% url 'complete_quiz' %}",
                        data: {
                            "quiz-db": "quiz-db",
                            "csrfmiddlewaretoken" : "{{csrf_token}}"
                        },
                        dataType: 'json',
                    })
                    var value = $("#sel-db").val()
                    var correct_list = []
                    var incorrect_list = []
                      $(".modal-body-content-db").fadeOut()
                      setTimeout(function() {
                        $(".modal-body-content-db").empty()
                        $(".modal-body-db").append(`<div class="loader-wrapper loader-wrapper-db">
                                                      <div class="loader loader">
                                                        <div>
                                                          <ul>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg>
                                                            </li>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg>
                                                            </li>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg>
                                                            </li>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg>
                                                            </li>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg></li>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg>
                                                            </li>
                                                            </ul>
                                                        </div>
                                                        <span>Yükleniyor</span>
                                                      </div>
                                                     </div>`)
                      }, 500);
                        $.ajax({
                            type:"GET",
                            url: "{% url 'random-refresh' %}",
                            data: {
                                'random-db': value,
                            },
                            dataType: 'json',
                            success: function(data) {
                                var tr_list = data.tr_list
                                if (data.random_db) {
                                    $(".loader-wrapper-db").remove()
                                    $(".modal-body-content-db").append(
                                      `<div role="tabpanel">
                                        <ul class="nav nav-tabs-db" role="tablist"></ul>
                                        <div class="tab-content tab-content-db"></div>
                                       </div>
                                        <div class="modal fade confirm confirm-1" tabindex="-1" role="dialog" aria-labelledby="confirm" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                                <div class="modal-content quiz-finish-modal">
                                                  <div class="modal-body confirm-text-1"></div>
                                                  <div class="modal-footer">
                                                    <button type="button" class="btn-danger-custom confirm-no-1" data-dismiss="confirm">İptal</button>
                                                    <button type="button" class="btn-before confirm-ok-1">Onayla</button>
                                                  </div>
                                                </div>
                                            </div>
                                        </div>`)
                                    $(".modal-body-content-db").fadeIn()
                                    for (i=1;i<=value;i++) {
                                      $(".nav-tabs-db").append(`<li role="presentation" class="nav-item">
                                                                    <a data-id="db" class="nav-link" href="#db-${i}" aria-controls="db-${i}" role="tab" data-toggle="tab">${i}</a>
                                                                 </li>`)
                                      $(".tab-content-db").append(`<div data-no="${i}" role="tabpanel" class="tab-pane" id="db-${i}"></div>`)
                                    }
                                    $(".nav-tabs-db").find("a").first().click()
                                    data.random_db.map(function(i) {
                                        var index = data.random_db.indexOf(i) + 1
                                        var tr = tr_list[index-1]
                                        $(`#db-${index}`).append(`<div class="quiz-question mb-2">
                                        <button data-id="db" class="chevron-left"><i class="fas fa-chevron-left chevron"></i></button>
                                        <span class="word-db">${i}</span>
                                        <button data-id="db" class="chevron-right"><i class="fas fa-chevron-right chevron"></i></button>
                                        </div>
                                        <div class="d-flex justify-content-center hak")>0/2</div>
                                        <div class="d-flex justify-content-center mb-2 mt-1">
                                            <input type="text" class="quiz-answer mr-1" placeholder="Min. 2 harf" onClick="this.setSelectionRange(0, this.value.length)">
                                            <div class="quiz-result"></div>
                                        </div>
                                        <div class="d-flex justify-content-center">
                                            <button class="btn-secondary mr-2 quiz-dk-db">Bilmiyorum</button>
                                            <button class="btn-before quiz-answer-btn">Cevapla</button>
                                        </div>
                                        <div class="mt-3 quiz-tr">
                                            <div>Türkçeleri:</div>
                                            <div><ul></ul></div>
                                        </div>
                                        <div class="quiz-finish-div"><button class="btn-danger-custom quiz-finish quiz-finish-db" data-toggle="confirmation">Quiz'i bitir</button></div>`)
                                    })
                                    $(document).on("click", ".quiz-dk-db", function() {
                                        let ths = $(this)
                                        var no = parseInt(ths.parent().parent().attr("data-no"))
                                        var tr = tr_list[no-1]
                                        ths.parent().prev().find(".quiz-answer").addClass("box-dk").prop("placeholder", "")
                                        .prop("disabled", "true").css("opacity", ".65")
                                        ths.prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                        ths.next().prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                        var word = ths.parent().prevAll().eq(2).find("span").text()
                                        incorrect_list.push(word)
                                        tr.map(function(i){
                                            ths.parent().next().find("ul").hide().append(`<li>${i}</li>`).fadeIn()
                                        })
                                        $(this).parent().prev().find(".quiz-result").append(`
                                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 130.2 130.2">
                                            <line class="path line" fill="none" stroke="#ff4e4e" stroke-width="6"
                                             stroke-linecap="round" stroke-miterlimit="10" x1="34.4" y1="37.9" x2="87.8" y2="92.3"/>
                                            <line class="path line" fill="none" stroke="#ff4e4e" stroke-width="6"
                                             stroke-linecap="round" stroke-miterlimit="10" x1="89.8" y1="38" x2="34.4" y2="92.2"/>
                                            </svg>`)
                                        setTimeout(function() {
                                            ths.parent().prev().find(".quiz-result").find(".path").removeClass("path")
                                        }, 1000);
                                    })
                                    $(document).on("keypress", ".quiz-answer", function() {
                                        var keycode = (event.keyCode ? event.keyCode : event.which)
                                        if(keycode == '13'){
                                            $(this).parent().next().find(".quiz-answer-btn").click()
                                        }
                                    })
                                    $(document).on("click", ".quiz-answer-btn", function() {
                                        var count = parseInt($(this).parent().prev().prev().text().split("/")[0])
                                        var no = parseInt($("a.active").text())
                                        let ths = $(this)
                                        var tr = tr_list[no-1]
                                        if (ths.parent().prev().find(".quiz-answer").val().length >= 2) {
                                            if (tr.includes( ths.parent().prev().find(".quiz-answer").val().toLowerCase() )) {
                                                if ( ths.parent().prev().find(".quiz-answer").hasClass("shake") ) {
                                                    ths.parent().prev().find(".quiz-answer").removeClass("shake")
                                                }
                                                ths.parent().prev().find(".quiz-answer").css("border-color", "#2cb74c")
                                                .css("box-shadow", "0px 0px 5px #2cb74c").prop("disabled", "true").css("opacity", ".65")
                                                ths.prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                                ths.prev().prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                                var word = ths.parent().prevAll().eq(2).find("span").text()
                                                correct_list.push(word)
                                                tr.map(function(i){
                                                    ths.parent().next().find("ul").hide().append(`<li>${i}</li>`).fadeIn()
                                                })
                                                ths.parent().prev().find(".quiz-result").append(`
                                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 130.2 130.2">
                                                <polyline class="path check" fill="none" stroke="#2cb74c" stroke-width="6"
                                                stroke-linecap="round" stroke-miterlimit="10" points="100.2,40.2 51.5,88.8 29.8,67.5 "/>
                                                </svg>`)
                                                setTimeout(function() {
                                                    ths.parent().prev().find(".quiz-result").find(".path").removeClass("path")
                                                }, 1000);
                                            } else {
                                                if (count==0) {
                                                    ths.parent().prev().find(".quiz-answer").addClass("shake box-dk")
                                                    ths.parent().prev().prev().html("1/2")
                                                    setTimeout(function() {
                                                        ths.parent().prev().find(".quiz-answer").removeClass("shake")
                                                    }, 300);
                                                } else if (count==1) {
                                                    if ( ths.parent().prev().find(".quiz-answer").hasClass("shake") ) {
                                                        ths.parent().prev().find(".quiz-answer").removeClass("shake")
                                                    }
                                                    ths.prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                                    ths.prev().prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                                    ths.parent().prev().prev().html("2/2")
                                                    ths.parent().prev().find(".quiz-answer").prop("disabled", "true").css("opacity", ".65")
                                                    var word = $(this).parent().prevAll().eq(2).find("span").text()
                                                    incorrect_list.push(word)
                                                    tr.map(function(i){
                                                        ths.parent().next().find("ul").hide().append(`<li>${i}</li>`).fadeIn()
                                                    })
                                                    ths.parent().prev().find(".quiz-result").append(`
                                                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 130.2 130.2">
                                                        <line class="path line" fill="none" stroke="#ff4e4e" stroke-width="6"
                                                         stroke-linecap="round" stroke-miterlimit="10" x1="34.4" y1="37.9" x2="87.8" y2="92.3"/>
                                                        <line class="path line" fill="none" stroke="#ff4e4e" stroke-width="6"
                                                         stroke-linecap="round" stroke-miterlimit="10" x1="89.8" y1="38" x2="34.4" y2="92.2"/>
                                                        </svg>`)
                                                    setTimeout(function() {
                                                        ths.parent().prev().find(".quiz-result").find(".path").removeClass("path")
                                                    }, 1000);
                                                }
                                            }
                                        } else {
                                            ths.parent().prev().find(".quiz-answer").addClass("shake")
                                            setTimeout(function() {
                                                ths.parent().prev().find(".quiz-answer").removeClass("shake")
                                            }, 300);
                                        }
                                    })
                                    $(document).on("click", ".quiz-finish-db", function() {
                                        if ((incorrect_list.length + correct_list.length) < value) {
                                            $(".confirm-text-1").html("Cevaplamadığın sorular var.<br> Quiz'i bitirmek istediğine emin misin?")
                                            $(".confirm-1").modal()
                                        } else {
                                            $(".confirm-text-1").html("Quiz'i bitirmek istediğine emin misin?")
                                            $(".confirm-1").modal()
                                        }
                                    })
                                    $(document).on("click", ".confirm-ok-1", function(e) {
                                        e.preventDefault()
                                        $(document).find(".quiz-dk-db").click()
                                        $.ajax({
                                            type:"POST",
                                            url: "{% url 'save-quiz' %}",
                                            data: {
                                                'quiz_db': true,
                                                'correct_list': correct_list,
                                                'incorrect_list': incorrect_list,
                                                'csrfmiddlewaretoken' : '{{csrf_token}}'
                                            },
                                            dataType: 'json',
                                        })
                                        $(".nav-tabs-db").append(`<li role="presentation" class="nav-item">
                                                                    <a data-id="db" class="nav-link" href=".res-db" aria-controls="res-db" role="tab" data-toggle="tab"><i class="fas fa-list-ol"></i></a>
                                                                   </li>`)
                                        $(".tab-content-db").append(`<div role="tabpanel" class="tab-pane res-db">
                                                                        <div>
                                                                            <span class="results">Sonuçlar</span>
                                                                            ${value} adet sorudan ${correct_list.length} tanesini doğru yaptın.
                                                                            <ul class="modal-list res-db-ul"></ul>
                                                                        </div>
                                                                      </div>`)
                                        for (i=0;i<value;i++) {
                                            word = $(document).find(".word-db").eq(i).text()
                                            if (correct_list.includes(word)) {
                                                $(".res-db-ul").append(`<li data-id="${i}">
                                                                          <a class="correct" href="" data-id="res-word">${word}</a>
                                                                          <a target="_blank" title="Sözlükte arat" href="/sözlük/q=${word}">
                                                                            <i class="fa fa-search"></i>
                                                                          </a>
                                                                        </li>`)
                                            } else {
                                                $(".res-db-ul").append(`<li data-id="${i}">
                                                                          <a class="incorrect" href="" data-id="res-word">${word}</a>
                                                                          <a target="_blank" title="Sözlükte arat" href="/sözlük/q=${word}">
                                                                            <i class="fa fa-search"></i>
                                                                          </a>
                                                                        </li>`)
                                            }
                                        }
                                        $(".quiz-finish-db").remove()
                                        $("a[data-id='res-word']").click(function(e){
                                            e.preventDefault()
                                            var target = $(this).parent().attr("data-id")
                                            $("a[data-id='db']").eq(target).click()
                                        })
                                        $(".confirm-1").modal("hide")
                                        setTimeout(function() {
                                            $("a[aria-controls='res-db']").click()
                                        }, 4);
                                    })
                                    $(document).on("click", ".confirm-no-1", function(e) {
                                        e.preventDefault()
                                        $(".confirm-1").modal("hide")
                                    })
                                    $(".quiz-question:first").find(".chevron-left[data-id='db']").remove()
                                    $(".quiz-question:last").find(".chevron-right[data-id='db']").remove()
                                }
                            }
                        })
                } else if ( "{{is_quiz_db_finished}}" == "True" ) {
                    $(".quiz-err-db").remove()
                    ths.after(`<div class="quiz-err-db mt-1">* Günlük Quiz'inizi zaten tamamlamışsınız.
                                                                Yarın tekrar gelin!</div>`)
                }
            } else if (ths.hasClass("start-unl")) {
                if ( "{{is_quiz_unl_finished}}" == "False" ) {
                    $.ajax({
                        type:"POST",
                        url: "{% url 'complete_quiz' %}",
                        data: {
                            "quiz-unl": "quiz-unl",
                            "csrfmiddlewaretoken" : "{{csrf_token}}"
                        },
                        dataType: 'json',
                    })
                    var value = $("#sel-unl").val()
                    var correct_list = []
                    var incorrect_list = []
                    var count = $("#count_unl").text()
                    var gap = value - count
                    if ( gap > 0 ) {
                      if ( !($(".quiz-err-unl").length) ) {
                        ths.after(`<div class="quiz-err-unl mt-1">* Quiz\'e başlamak için listenizde yeterince kelime bulunmuyor.
                                    En az ${gap} kelime daha ekleyip tekrar deneyin.</div>`)
                      } else {
                        $(".quiz-err-unl").remove()
                        ths.after(`<div class="quiz-err-unl mt-1">* Quiz\'e başlamak için listenizde yeterince kelime bulunmuyor.
                                    En az ${gap} kelime daha ekleyip tekrar deneyin.</div>`)
                      }
                    } else {
                      $(".quiz-err-unl").remove()
                      $(".modal-body-content-unl").fadeOut()
                      setTimeout(function() {
                        $(".modal-body-content-unl").empty()
                        $(".modal-body-unl").append(`<div class="loader-wrapper loader-wrapper-unl">
                                                      <div class="loader loader">
                                                        <div>
                                                          <ul>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg>
                                                            </li>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg>
                                                            </li>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg>
                                                            </li>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg>
                                                            </li>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg></li>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg>
                                                            </li>
                                                            </ul>
                                                        </div>
                                                        <span>Yükleniyor</span>
                                                      </div>
                                                     </div>`)
                      }, 500);
                      setTimeout(function() {
                        $(".loader-wrapper-unl").remove()
                        $(".modal-body-content-unl").append(
                          `<div role="tabpanel">
                            <ul class="nav nav-tabs-unl" role="tablist"></ul>
                            <div class="tab-content tab-content-unl"></div>
                           </div>
                            <div class="modal fade confirm confirm-2" tabindex="-1" role="dialog" aria-labelledby="confirm" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content quiz-finish-modal">
                                      <div class="modal-body confirm-text-2"></div>
                                      <div class="modal-footer">
                                        <button type="button" class="btn-danger-custom confirm-no-2" data-dismiss="confirm">İptal</button>
                                        <button type="button" class="btn-before confirm-ok-2">Onayla</button>
                                      </div>
                                    </div>
                                </div>
                            </div>`)
                        for (i=1;i<=value;i++) {
                          $(".nav-tabs-unl").append(`<li role="presentation" class="nav-item">
                                                        <a data-id="unl" class="nav-link" href="#unl-${i}" aria-controls="unl-${i}" role="tab" data-toggle="tab">${i}</a>
                                                     </li>`)
                          $(".tab-content-unl").append(`<div data-no="${i}" role="tabpanel" class="tab-pane" id="unl-${i}"></div>`)
                        }
                        $(".nav-tabs-unl").find("a").first().click()
                        $.ajax({
                            type:"GET",
                            url: "{% url 'random-refresh' %}",
                            data: {
                                'random-unlearned': value,
                            },
                            dataType: 'json',
                            success: function(data) {
                                var tr_list = data.tr_list
                                if (data.random_unlearned) {
                                    data.random_unlearned.map(function(i) {
                                        var index = data.random_unlearned.indexOf(i) + 1
                                        var tr = tr_list[index-1]
                                        $(`#unl-${index}`).append(`<div class="quiz-question mb-2">
                                        <button data-id="unl" class="chevron-left"><i class="fas fa-chevron-left chevron"></i></button>
                                        <span class="word-unl">${i}</span>
                                        <button data-id="unl" class="chevron-right"><i class="fas fa-chevron-right chevron"></i></button>
                                        </div>
                                        <div class="d-flex justify-content-center hak")>0/2</div>
                                        <div class="d-flex justify-content-center mb-2 mt-1">
                                            <input type="text" class="quiz-answer mr-1" placeholder="Min. 2 harf" onClick="this.setSelectionRange(0, this.value.length)">
                                            <div class="quiz-result"></div>
                                        </div>
                                        <div class="d-flex justify-content-center">
                                            <button class="btn-secondary mr-2 quiz-dk-unl">Bilmiyorum</button>
                                            <button class="btn-before quiz-answer-btn">Cevapla</button>
                                        </div>
                                        <div class="mt-3 quiz-tr">
                                            <div>Türkçeleri:</div>
                                            <div><ul></ul></div>
                                        </div>
                                        <div class="quiz-finish-div">
                                            <button class="btn-danger-custom quiz-finish quiz-finish-unl" data-toggle="confirmation">Quiz'i bitir</button>
                                        </div>`)
                                    })
                                    $(document).on("click", ".quiz-dk-unl", function() {
                                        let ths = $(this)
                                        var no = parseInt(ths.parent().parent().attr("data-no"))
                                        var tr = tr_list[no-1]
                                        ths.parent().prev().find(".quiz-answer").addClass("box-dk").prop("placeholder", "")
                                        .prop("disabled", "true").css("opacity", ".65")
                                        ths.prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                        ths.next().prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                        var word = ths.parent().prevAll().eq(2).find("span").text()
                                        incorrect_list.push(word)
                                        tr.map(function(i){
                                            ths.parent().next().find("ul").hide().append(`<li>${i}</li>`).fadeIn()
                                        })
                                        $(this).parent().prev().find(".quiz-result").append(`
                                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 130.2 130.2">
                                            <line class="path line" fill="none" stroke="#ff4e4e" stroke-width="6"
                                             stroke-linecap="round" stroke-miterlimit="10" x1="34.4" y1="37.9" x2="87.8" y2="92.3"/>
                                            <line class="path line" fill="none" stroke="#ff4e4e" stroke-width="6"
                                             stroke-linecap="round" stroke-miterlimit="10" x1="89.8" y1="38" x2="34.4" y2="92.2"/>
                                            </svg>`)
                                        setTimeout(function() {
                                            ths.parent().prev().find(".quiz-result").find(".path").removeClass("path")
                                        }, 1000);
                                    })
                                    $(document).on("keypress", ".quiz-answer", function() {
                                        var keycode = (event.keyCode ? event.keyCode : event.which)
                                        if(keycode == '13'){
                                            $(this).parent().next().find(".quiz-answer-btn").click()
                                        }
                                    })
                                    $(document).on("click", ".quiz-answer-btn", function() {
                                        var count = parseInt($(this).parent().prev().prev().text().split("/")[0])
                                        var no = parseInt($("a.active").text())
                                        let ths = $(this)
                                        var tr = tr_list[no-1]
                                        if (ths.parent().prev().find(".quiz-answer").val().length >= 2) {
                                            if (tr.includes( ths.parent().prev().find(".quiz-answer").val().toLowerCase() )) {
                                                if ( ths.parent().prev().find(".quiz-answer").hasClass("shake") ) {
                                                    ths.parent().prev().find(".quiz-answer").removeClass("shake")
                                                }
                                                ths.parent().prev().find(".quiz-answer").css("border-color", "#2cb74c")
                                                .css("box-shadow", "0px 0px 5px #2cb74c").prop("disabled", "true").css("opacity", ".65")
                                                ths.prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                                ths.prev().prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                                var word = ths.parent().prevAll().eq(2).find("span").text()
                                                correct_list.push(word)
                                                tr.map(function(i){
                                                    ths.parent().next().find("ul").hide().append(`<li>${i}</li>`).fadeIn()
                                                })
                                                ths.parent().prev().find(".quiz-result").append(`
                                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 130.2 130.2">
                                                <polyline class="path check" fill="none" stroke="#2cb74c" stroke-width="6"
                                                stroke-linecap="round" stroke-miterlimit="10" points="100.2,40.2 51.5,88.8 29.8,67.5 "/>
                                                </svg>`)
                                                setTimeout(function() {
                                                    ths.parent().prev().find(".quiz-result").find(".path").removeClass("path")
                                                }, 1000);
                                            } else {
                                                if (count==0) {
                                                    ths.parent().prev().find(".quiz-answer").addClass("shake box-dk")
                                                    ths.parent().prev().prev().html("1/2")
                                                    setTimeout(function() {
                                                        ths.parent().prev().find(".quiz-answer").removeClass("shake")
                                                    }, 300);
                                                } else if (count==1) {
                                                    if ( ths.parent().prev().find(".quiz-answer").hasClass("shake") ) {
                                                        ths.parent().prev().find(".quiz-answer").removeClass("shake")
                                                    }
                                                    ths.prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                                    ths.prev().prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                                    ths.parent().prev().prev().html("2/2")
                                                    ths.parent().prev().find(".quiz-answer").prop("disabled", "true").css("opacity", ".65")
                                                    var word = $(this).parent().prevAll().eq(2).find("span").text()
                                                    incorrect_list.push(word)
                                                    tr.map(function(i){
                                                        ths.parent().next().find("ul").hide().append(`<li>${i}</li>`).fadeIn()
                                                    })
                                                    ths.parent().prev().find(".quiz-result").append(`
                                                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 130.2 130.2">
                                                        <line class="path line" fill="none" stroke="#ff4e4e" stroke-width="6"
                                                         stroke-linecap="round" stroke-miterlimit="10" x1="34.4" y1="37.9" x2="87.8" y2="92.3"/>
                                                        <line class="path line" fill="none" stroke="#ff4e4e" stroke-width="6"
                                                         stroke-linecap="round" stroke-miterlimit="10" x1="89.8" y1="38" x2="34.4" y2="92.2"/>
                                                        </svg>`)
                                                    setTimeout(function() {
                                                        ths.parent().prev().find(".quiz-result").find(".path").removeClass("path")
                                                    }, 1000);
                                                }
                                            }
                                        } else {
                                            ths.parent().prev().find(".quiz-answer").addClass("shake")
                                            setTimeout(function() {
                                                ths.parent().prev().find(".quiz-answer").removeClass("shake")
                                            }, 300);
                                        }
                                    })
                                    $(document).on("click", ".quiz-finish-unl", function() {
                                        if ((incorrect_list.length + correct_list.length) < value) {
                                            $(".confirm-text-2").html("Cevaplamadığın sorular var.<br> Quiz'i bitirmek istediğine emin misin?")
                                            $(".confirm-2").modal()
                                        } else {
                                            $(".confirm-text-2").html("Quiz'i bitirmek istediğine emin misin?")
                                            $(".confirm-2").modal()
                                        }
                                    })
                                    $(document).on("click", ".confirm-ok-2", function(e) {
                                        e.preventDefault()
                                        $(document).find(".quiz-dk-unl").click()
                                        $.ajax({
                                            type:"POST",
                                            url: "{% url 'save-quiz' %}",
                                            data: {
                                                'quiz_unl': true,
                                                'correct_list': correct_list,
                                                'incorrect_list': incorrect_list,
                                                'csrfmiddlewaretoken' : '{{csrf_token}}'
                                            },
                                            dataType: 'json',
                                        })
                                        $(".nav-tabs-unl").append(`<li role="presentation" class="nav-item">
                                                                    <a data-id="unl" class="nav-link" href=".res-unl" aria-controls="res-unl" role="tab" data-toggle="tab"><i class="fas fa-list-ol"></i></a>
                                                                   </li>`)
                                        $(".tab-content-unl").append(`<div role="tabpanel" class="tab-pane res-unl">
                                                                        <div>
                                                                            <span class="results">Sonuçlar</span>
                                                                            ${value} adet sorudan ${correct_list.length} tanesini doğru yaptın.
                                                                            <ul class="modal-list res-unl-ul"></ul>
                                                                        </div>
                                                                      </div>`)
                                        for (i=0;i<value;i++) {
                                            word = $(document).find(".word-unl").eq(i).text()
                                            is_added = ""
                                            $.ajax({
                                                type:"GET",
                                                url: "{% url 'reminder' %}",
                                                data: {
                                                    'is_added': 'is_added',
                                                    'word': word,
                                                },
                                                async:false,
                                                dataType: 'json',
                                                success: function(data) {
                                                    is_added = data.is_added
                                                }
                                            })
                                            if (correct_list.includes(word)) {
                                                $(".res-unl-ul").append(`<li data-id="${i}">
                                                                      <a class="correct" href="" data-id="res-word">${word}</a>
                                                                      <div class="dropdown">
                                                                          <button class="btn-dd"
                                                                                  type="button" id="dropdownResUnl" data-toggle="dropdown"
                                                                                  aria-haspopup="true" aria-expanded="false">
                                                                            <img src="{% static 'img/menu.png' %}" alt="Menu">
                                                                          </button>
                                                                          <div data-id="unl-${i}" class="dropdown-menu" aria-labelledby="dropdownResUnl">
                                                                            <a target="_blank" class="dropdown-item" href="/sözlük/q=${word}">
                                                                                <i class="fa fa-search"></i>
                                                                                Sözlükte arat
                                                                            </a>
                                                                            <a target="_blank" class="dropdown-item" href="/kelime_listesi/q=${word}">
                                                                                <i class="fas fa-clipboard-list"></i>
                                                                                Listende görüntüle
                                                                            </a>
                                                                          </div>
                                                                      </div>
                                                                      </li>`)
                                                if (is_added) {
                                                    $(`div[data-id='unl-${i}']`).append(`<a class="dropdown-item" href="#!">
                                                                                             <i class="fas fa-bell"></i>
                                                                                             <span>Hatırlatıcıdan kaldır</span>
                                                                                         </a>`)
                                                } else {
                                                    $(`div[data-id='unl-${i}']`).append(`<a class="dropdown-item" href="#!">
                                                                                             <i class="fas fa-bell"></i>
                                                                                             <span>Hatırlatıcıya ekle</span>
                                                                                         </a>`)
                                                }
                                            } else {
                                                $(".res-unl-ul").append(`<li data-id="${i}">
                                                                          <a class="incorrect" href="" data-id="res-word">${word}</a>
                                                                          <div class="dropdown">
                                                                              <button class="btn-dd"
                                                                                      type="button" id="dropdownResUnl" data-toggle="dropdown"
                                                                                      aria-haspopup="true" aria-expanded="false">
                                                                                <img src="{% static 'img/menu.png' %}" alt="Menu">
                                                                              </button>
                                                                              <div data-id="unl-${i}" class="dropdown-menu" aria-labelledby="dropdownResUnl">
                                                                                <a target="_blank" class="dropdown-item" href="/sözlük/q=${word}">
                                                                                    <i class="fa fa-search"></i>
                                                                                    Sözlükte arat
                                                                                </a>
                                                                                <a target="_blank" class="dropdown-item" href="/kelime_listesi/q=${word}">
                                                                                    <i class="fas fa-clipboard-list"></i>
                                                                                    Listende görüntüle
                                                                                </a>
                                                                              </div>
                                                                          </div>
                                                                         </li>`)
                                                if (is_added) {
                                                    $(`div[data-id='unl-${i}']`).append(`<a class="dropdown-item" href="#!">
                                                                                             <i class="fas fa-bell"></i>
                                                                                             <span>Hatırlatıcıdan kaldır</span>
                                                                                         </a>`)
                                                } else {
                                                    $(`div[data-id='unl-${i}']`).append(`<a class="dropdown-item" href="#!">
                                                                                             <i class="fas fa-bell"></i>
                                                                                             <span>Hatırlatıcıya ekle</span>
                                                                                         </a>`)
                                                }
                                            }
                                        }
                                        $(".quiz-finish-unl").remove()
                                        $("a[data-id='res-word']").click(function(e){
                                            e.preventDefault()
                                            var target = $(this).parent().attr("data-id")
                                            $("a[data-id='unl']").eq(target).click()
                                        })
                                        $(".confirm-2").modal("hide")
                                        setTimeout(function() {
                                            $("a[aria-controls='res-unl']").click()
                                        }, 4);
                                    })
                                    $(document).on("click", ".confirm-no-2", function(e) {
                                        e.preventDefault()
                                        $(".confirm-2").modal("hide")
                                    })
                                    $(".quiz-question:first").find(".chevron-left[data-id='unl']").remove()
                                    $(".quiz-question:last").find(".chevron-righ[data-id='unl']t").remove()
                                }
                            }
                        })
                        $(".modal-body-content-unl").fadeIn()
                      }, 3300)
                    }
                } else if ( "{{is_quiz_unl_finished}}" == "True" ) {
                    $(".quiz-err-unl").remove()
                    ths.after(`<div class="quiz-err-unl mt-1">* Günlük Quiz'inizi zaten tamamlamışsınız.
                                                                Yarın tekrar gelin!</div>`)
                }

            } else if (ths.hasClass("start-l")) {
                if ( "{{is_quiz_l_finished}}" == "False" ) {
                    $.ajax({
                        type:"POST",
                        url: "{% url 'complete_quiz' %}",
                        data: {
                            "quiz-l": "quiz-l",
                            "csrfmiddlewaretoken" : "{{csrf_token}}"
                        },
                        dataType: 'json',
                    })
                    var value = $("#sel-l").val()
                    var correct_list = []
                    var incorrect_list = []
                    var count = $("#count_l").text()
                    var gap = value - count
                    if ( gap > 0 ) {
                      if ( !($(".quiz-err-l").length) ) {
                        ths.after(`<div class="quiz-err-l mt-1">* Quiz\'e başlamak için listenizde yeterince kelime bulunmuyor.
                                    En az ${gap} kelime daha ekleyip tekrar deneyin.</div>`)
                      } else {
                        $(".quiz-err-l").remove()
                        ths.after(`<div class="quiz-err-l mt-1">* Quiz\'e başlamak için listenizde yeterince kelime bulunmuyor.
                                    En az ${gap} kelime daha ekleyip tekrar deneyin.</div>`)
                      }
                    } else {
                      $(".quiz-err-l").remove()
                      $(".modal-body-content-l").fadeOut()
                      setTimeout(function() {
                        $(".modal-body-content-l").empty()
                        $(".modal-body-l").append(`<div class="loader-wrapper loader-wrapper-l">
                                                      <div class="loader loader">
                                                        <div>
                                                          <ul>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg>
                                                            </li>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg>
                                                            </li>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg>
                                                            </li>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg>
                                                            </li>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg></li>
                                                            <li><svg viewBox="0 0 90 120" fill="currentColor">
                                                                  <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                                                                </svg>
                                                            </li>
                                                            </ul>
                                                        </div>
                                                        <span>Yükleniyor</span>
                                                      </div>
                                                     </div>`)
                      }, 500);
                      setTimeout(function() {
                        $(".loader-wrapper-l").remove()
                        $(".modal-body-content-l").append(
                          `<div role="tabpanel">
                            <ul class="nav nav-tabs-l" role="tablist"></ul>
                            <div class="tab-content tab-content-l"></div>
                           </div>
                            <div class="modal fade confirm confirm-3" tabindex="-1" role="dialog" aria-labelledby="confirm" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content quiz-finish-modal">
                                      <div class="modal-body confirm-text-3"></div>
                                      <div class="modal-footer">
                                        <button type="button" class="btn-danger-custom confirm-no-3" data-dismiss="confirm">İptal</button>
                                        <button type="button" class="btn-before confirm-ok-3">Onayla</button>
                                      </div>
                                    </div>
                                </div>
                            </div>`)
                        for (i=1;i<=value;i++) {
                          $(".nav-tabs-l").append(`<li role="presentation" class="nav-item">
                                                    <a data-id="l" class="nav-link" href="#l-${i}" aria-controls="l-${i}" role="tab" data-toggle="tab">${i}</a>
                                                    </li>`)
                          $(".tab-content-l").append(`<div data-no="${i}" role="tabpanel" class="tab-pane" id="l-${i}"></div>`)
                        }
                        $(".nav-tabs-l").find("a").first().click()
                        $.ajax({
                            type:"GET",
                            url: "{% url 'random-refresh' %}",
                            data: {
                                'random-learned': value,
                            },
                            dataType: 'json',
                            success: function(data) {
                                var tr_list = data.tr_list
                                if (data.random_learned) {
                                    data.random_learned.map(function(i) {
                                        var index = data.random_learned.indexOf(i) + 1
                                        var tr = tr_list[index-1]
                                        $(`#l-${index}`).append(`<div class="quiz-question mb-2">
                                        <button data-id="l" class="chevron-left"><i class="fas fa-chevron-left chevron"></i></button>
                                        <span class="word-l">${i}</span>
                                        <button data-id="l" class="chevron-right"><i class="fas fa-chevron-right chevron"></i></button>
                                        </div>
                                        <div class="d-flex justify-content-center hak")>0/2</div>
                                        <div class="d-flex justify-content-center mb-2 mt-1">
                                            <input type="text" class="quiz-answer mr-1" placeholder="Min. 2 harf" onClick="this.setSelectionRange(0, this.value.length)">
                                            <div class="quiz-result"></div>
                                        </div>
                                        <div class="d-flex justify-content-center">
                                            <button class="btn-secondary mr-2 quiz-dk-l">Bilmiyorum</button>
                                            <button class="btn-before quiz-answer-btn">Cevapla</button>
                                        </div>
                                        <div class="mt-3 quiz-tr">
                                            <div>Türkçeleri:</div>
                                            <div><ul></ul></div>
                                        </div>
                                        <div class="quiz-finish-div">
                                            <button class="btn-danger-custom quiz-finish quiz-finish-l" data-toggle="confirmation">Quiz'i bitir</button>
                                        </div>`)
                                    })
                                    $(document).on("click", ".quiz-dk-l", function() {
                                        let ths = $(this)
                                        var no = parseInt(ths.parent().parent().attr("data-no"))
                                        var tr = tr_list[no-1]
                                        ths.parent().prev().find(".quiz-answer").addClass("box-dk").prop("placeholder", "")
                                        .prop("disabled", "true").css("opacity", ".65")
                                        ths.prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                        ths.next().prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                        var word = ths.parent().prevAll().eq(2).find("span").text()
                                        incorrect_list.push(word)
                                        tr.map(function(i){
                                            ths.parent().next().find("ul").hide().append(`<li>${i}</li>`).fadeIn()
                                        })
                                        $(this).parent().prev().find(".quiz-result").append(`
                                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 130.2 130.2">
                                            <line class="path line" fill="none" stroke="#ff4e4e" stroke-width="6"
                                             stroke-linecap="round" stroke-miterlimit="10" x1="34.4" y1="37.9" x2="87.8" y2="92.3"/>
                                            <line class="path line" fill="none" stroke="#ff4e4e" stroke-width="6"
                                             stroke-linecap="round" stroke-miterlimit="10" x1="89.8" y1="38" x2="34.4" y2="92.2"/>
                                            </svg>`)
                                        setTimeout(function() {
                                            ths.parent().prev().find(".quiz-result").find(".path").removeClass("path")
                                        }, 1000);
                                    })
                                    $(document).on("keypress", ".quiz-answer", function() {
                                        var keycode = (event.keyCode ? event.keyCode : event.which)
                                        if(keycode == '13'){
                                            $(this).parent().next().find(".quiz-answer-btn").click()
                                        }
                                    })
                                    $(document).on("click", ".quiz-answer-btn", function() {
                                        var count = parseInt($(this).parent().prev().prev().text().split("/")[0])
                                        var no = parseInt($("a.active").text())
                                        let ths = $(this)
                                        var tr = tr_list[no-1]
                                        if (ths.parent().prev().find(".quiz-answer").val().length >= 2) {
                                            if (tr.includes( ths.parent().prev().find(".quiz-answer").val().toLowerCase() )) {
                                                if ( ths.parent().prev().find(".quiz-answer").hasClass("shake") ) {
                                                    ths.parent().prev().find(".quiz-answer").removeClass("shake")
                                                }
                                                ths.parent().prev().find(".quiz-answer").css("border-color", "#2cb74c")
                                                .css("box-shadow", "0px 0px 5px #2cb74c").prop("disabled", "true").css("opacity", ".65")
                                                ths.prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                                ths.prev().prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                                var word = ths.parent().prevAll().eq(2).find("span").text()
                                                correct_list.push(word)
                                                tr.map(function(i){
                                                    ths.parent().next().find("ul").hide().append(`<li>${i}</li>`).fadeIn()
                                                })
                                                ths.parent().prev().find(".quiz-result").append(`
                                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 130.2 130.2">
                                                <polyline class="path check" fill="none" stroke="#2cb74c" stroke-width="6"
                                                stroke-linecap="round" stroke-miterlimit="10" points="100.2,40.2 51.5,88.8 29.8,67.5 "/>
                                                </svg>`)
                                                setTimeout(function() {
                                                    ths.parent().prev().find(".quiz-result").find(".path").removeClass("path")
                                                }, 1000);
                                            } else {
                                                if (count==0) {
                                                    ths.parent().prev().find(".quiz-answer").addClass("shake box-dk")
                                                    ths.parent().prev().prev().html("1/2")
                                                    setTimeout(function() {
                                                        ths.parent().prev().find(".quiz-answer").removeClass("shake")
                                                    }, 300);
                                                } else if (count==1) {
                                                    if ( ths.parent().prev().find(".quiz-answer").hasClass("shake") ) {
                                                        ths.parent().prev().find(".quiz-answer").removeClass("shake")
                                                    }
                                                    ths.prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                                    ths.prev().prop("disabled", "true").addClass("disabled").addClass("not-allowed")
                                                    ths.parent().prev().prev().html("2/2")
                                                    ths.parent().prev().find(".quiz-answer").prop("disabled", "true").css("opacity", ".65")
                                                    var word = $(this).parent().prevAll().eq(2).find("span").text()
                                                    incorrect_list.push(word)
                                                    tr.map(function(i){
                                                        ths.parent().next().find("ul").hide().append(`<li>${i}</li>`).fadeIn()
                                                    })
                                                    ths.parent().prev().find(".quiz-result").append(`
                                                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 130.2 130.2">
                                                        <line class="path line" fill="none" stroke="#ff4e4e" stroke-width="6"
                                                         stroke-linecap="round" stroke-miterlimit="10" x1="34.4" y1="37.9" x2="87.8" y2="92.3"/>
                                                        <line class="path line" fill="none" stroke="#ff4e4e" stroke-width="6"
                                                         stroke-linecap="round" stroke-miterlimit="10" x1="89.8" y1="38" x2="34.4" y2="92.2"/>
                                                        </svg>`)
                                                    setTimeout(function() {
                                                        ths.parent().prev().find(".quiz-result").find(".path").removeClass("path")
                                                    }, 1000);
                                                }
                                            }
                                        } else {
                                            ths.parent().prev().find(".quiz-answer").addClass("shake")
                                            setTimeout(function() {
                                                ths.parent().prev().find(".quiz-answer").removeClass("shake")
                                            }, 300);
                                        }
                                    })
                                    $(document).on("click", ".quiz-finish-l", function() {
                                        if ((incorrect_list.length + correct_list.length) < value) {
                                            $(".confirm-text-3").html("Cevaplamadığın sorular var.<br> Quiz'i bitirmek istediğine emin misin?")
                                            $(".confirm-3").modal()
                                        } else {
                                            $(".confirm-text-3").html("Quiz'i bitirmek istediğine emin misin?")
                                            $(".confirm-3").modal()
                                        }
                                    })
                                    $(document).on("click", ".confirm-ok-3", function(e) {
                                        e.preventDefault()
                                        $(document).find(".quiz-dk-l").click()
                                        $.ajax({
                                            type:"POST",
                                            url: "{% url 'save-quiz' %}",
                                            data: {
                                                'quiz_l': true,
                                                'correct_list': correct_list,
                                                'incorrect_list': incorrect_list,
                                                'csrfmiddlewaretoken' : '{{csrf_token}}'
                                            },
                                            dataType: 'json',
                                        })
                                        $(".nav-tabs-l").append(`<li role="presentation" class="nav-item">
                                                                    <a data-id="l" class="nav-link" href=".res-l" aria-controls="res-l" role="tab" data-toggle="tab">
                                                                        <i class="fas fa-list-ol"></i>
                                                                    </a>
                                                                 </li>`)
                                        $(".tab-content-l").append(`<div role="tabpanel" class="tab-pane res-l">
                                                                        <div>
                                                                            <span class="results">Sonuçlar</span>
                                                                            ${value} adet sorudan ${correct_list.length} tanesini doğru yaptın.
                                                                            <ul class="modal-list res-l-ul"></ul>
                                                                        </div>
                                                                      </div>`)
                                        for (i=0;i<value;i++) {
                                            word = $(document).find(".word-l").eq(i).text()
                                            is_added = false
                                            $.ajax({
                                                type:"GET",
                                                url: "{% url 'reminder' %}",
                                                data: {
                                                    'word': word,
                                                    'is_added': 'is_added',
                                                },
                                                dataType: 'json',
                                                success: function(data) {
                                                    if (data.is_added) {
                                                        is_added = true
                                                    }
                                                }
                                            })
                                            if (correct_list.includes(word)) {
                                                $(".res-l-ul").append(`<li data-id="${i}">
                                                                      <a class="correct" href="" data-id="res-word">${word}</a>
                                                                      <div class="dropdown">
                                                                          <button class="btn-dd"
                                                                                  type="button" id="dropdownResL" data-toggle="dropdown"
                                                                                  aria-haspopup="true" aria-expanded="false">
                                                                            <img src="{% static 'img/menu.png' %}" alt="Menu">
                                                                          </button>
                                                                          <div data-id="l-${i}" class="dropdown-menu" aria-labelledby="dropdownResL" data-id="${i}">
                                                                            <a target="_blank" class="dropdown-item" href="/sözlük/q=${word}">
                                                                                <i class="fa fa-search"></i>
                                                                                Sözlükte arat
                                                                            </a>
                                                                            <a target="_blank" class="dropdown-item" href="/kelime_listesi/q=${word}">
                                                                                    <i class="fas fa-clipboard-list"></i>
                                                                                    Listende görüntüle
                                                                            </a>
                                                                          </div>
                                                                      </div>
                                                                      </li>`)
                                                if (is_added) {
                                                    $(`div[data-id='l-${i}']`).append(`<a class="dropdown-item" href="#!">
                                                                                            <i class="fas fa-bell"></i>
                                                                                            <span>Hatırlatıcıdan kaldır</span>
                                                                                        </a>`)
                                                } else {
                                                    $(`div[data-id='l-${i}']`).append(`<a class="dropdown-item" href="#!">
                                                                                            <i class="fas fa-bell"></i>
                                                                                            <span>Hatırlatıcıya ekle</span>
                                                                                        </a>`)
                                                }
                                            } else {
                                                $(".res-l-ul").append(`<li data-id="${i}">
                                                                      <a class="incorrect" href="" data-id="res-word">${word}</a>
                                                                      <div class="dropdown">
                                                                          <button class="btn-dd"
                                                                                  type="button" id="dropdownResL" data-toggle="dropdown"
                                                                                  aria-haspopup="true" aria-expanded="false">
                                                                            <img src="{% static 'img/menu.png' %}" alt="Menu">
                                                                          </button>
                                                                          <div data-id="l-${i}" class="dropdown-menu" aria-labelledby="dropdownResL">
                                                                            <a target="_blank" class="dropdown-item" href="/sözlük/q=${word}">
                                                                                <i class="fa fa-search"></i>
                                                                                Sözlükte arat
                                                                            </a>
                                                                            <a target="_blank" class="dropdown-item" href="/kelime_listesi/q=${word}">
                                                                                    <i class="fas fa-clipboard-list"></i>
                                                                                    Listende görüntüle
                                                                            </a>
                                                                          </div>
                                                                      </div>
                                                                      </li>`)
                                                if (is_added) {
                                                    $(`div[data-id='l-${i}']`).append(`<a class="dropdown-item" href="#!">
                                                                                            <i class="fas fa-bell"></i>
                                                                                            <span>Hatırlatıcıdan kaldır</span>
                                                                                        </a>`)
                                                } else {
                                                    $(`div[data-id='l-${i}']`).append(`<a class="dropdown-item" href="#!">
                                                                                            <i class="fas fa-bell"></i>
                                                                                            <span>Hatırlatıcıya ekle</span>
                                                                                        </a>`)
                                                }
                                            }
                                        }
                                        $(".confirm-3").modal("hide")
                                        $(".quiz-finish-l").remove()
                                        $("a[data-id='res-word']").click(function(e){
                                            e.preventDefault()
                                            var target = $(this).parent().attr("data-id")
                                            $("a[data-id='l']").eq(target).click()
                                        })
                                        setTimeout(function() {
                                            $("a[aria-controls='res-l']").click()
                                        }, 4);
                                    })
                                    $(document).on("click", ".confirm-no-3", function(e) {
                                        e.preventDefault()
                                        $(".confirm-3").modal("hide")
                                    })
                                    $(".quiz-question:first").find(".chevron-left[data-id='l']").remove()
                                    $(".quiz-question:last").find(".chevron-right[data-id='l']").remove()
                                }
                            }
                        })
                        $(".modal-body-content-l").fadeIn()
                      }, 3300)
                    }
                } else if ( "{{is_quiz_l_finished}}" == "True" ) {
                    $(".quiz-err-l").remove()
                    ths.after(`<div class="quiz-err-l mt-1">* Günlük Quiz'inizi zaten tamamlamışsınız.
                                                                Yarın tekrar gelin!</div>`)
                }
            }
        }
    })

    $(document).on("click", "a.dropdown-item", function() {
        var ths = $(this)
        var text = ths.parent().parent().prev().text()
        if (ths.find("span").html() == "Hatırlatıcıya ekle") {
            $.ajax({
                type:"GET",
                url: "{% url 'reminder' %}",
                data: {
                    'word': text,
                    'add 2 reminder': true,
                },
                dataType: 'json',
                success: function(data) {
                    stopNotif()
                    $(".notif").html("Hatırlatıcıya eklendi!").addClass("notif-show")
                    notifHide()
                    ths.html("Hatırlatıcıdan kaldır")
                }
            })
        } else if (ths.find("span").html() == "Hatırlatıcıdan kaldır") {
            $.ajax({
                type:"GET",
                url: "{% url 'reminder' %}",
                data: {
                    'word': text,
                    'remove from reminder': true,
                },
                dataType: 'json',
                success: function(data) {
                    stopNotif()
                    $(".notif").html("Hatırlatıcıdan kaldırıldı!").addClass("notif-show")
                    notifHide()
                    var attr = ths.parent().attr("data-reminder")
                    if ( typeof attr !== typeof undefined && attr !== false ) {
                        ths.parent().parent().parent().remove()
                    } else {
                        ths.html("Hatırlatıcıya ekle")
                    }
                }
            })
        }
    })

    $(document).on("click", '.chevron-left', function() {
        id_ = $(this).attr("data-id")
        var target = parseInt( $(this).parent().parent().attr("data-no") ) - 2
        $(`a[data-id=${id_}]`).eq(target).click()
    })

    $(document).on("click", '.chevron-right', function() {
        id_ = $(this).attr("data-id")
        var target = parseInt( $(this).parent().parent().attr("data-no") )
        $(`a[data-id=${id_}]`).eq(target).click()
    })

    $(document).keydown(function(e){
        if (e.keyCode == 37) {
            $("div.active").find(".chevron-left").click()
            setTimeout(function() {
                $("div.active").find(".quiz-answer").focus()
            }, 4);
        } else if (e.keyCode == 39) {
            $("div.active").find(".chevron-right").click()
            setTimeout(function() {
                $("div.active").find(".quiz-answer").focus()
            }, 4);
        }
    });

    function mediaContainer(container) {
      if (container.matches) {
        $(".container-media").addClass("container")
      } else {
        $(".container-media").removeClass("container")
      }
    }
    var container = window.matchMedia("(min-width:576px)")
    mediaContainer(container)
    container.addListener(mediaContainer)

    $(".ref").click(function() {
        var ths = $(this);
        if (ths.hasClass('ref-l')) {
            if (ths.parents().eq(3).hasClass("flip-card")) {
                ths.parents().eq(3).removeClass("flip-card")
            } else {
                ths.parents().eq(3).addClass("flip-card")
            }
            $.ajax({
                type:"GET",
                url: "{% url 'random-refresh' %}",
                async: false,
                data: {
                    'random-learned': "refresh",
                },
                dataType: 'json',
                success: function(data) {
                    if (data.random_learned) {
                        var ref;
                        var quiz;
                        setTimeout(function() {
                            $(".ul-learned").empty();
                            $(".title-l").css("z-index", "-1").html("")
                            ref = $(".ref-img-l").detach()
                            $("button[data-target='#quiz-l']").html("")
                        },700)
                        setTimeout(function() {
                            $(".title-l").css("z-index", "initial").html("Öğrendiklerim")
                            $(".ref-l").prepend(ref)
                            $("button[data-target='#quiz-l']").html("Quiz")
                            data.random_learned.map(function(i) {
                                $(".ul-learned").append(`<li><a class="teal" href="/sözlük/q=${i}/">${i}</a></li>`);
                            });
                        },1900)
                    }
                }
            }) // ajax
        } else if (ths.hasClass('ref-unl')) {
            if (ths.parents().eq(3).hasClass("flip-card")) {
                ths.parents().eq(3).removeClass("flip-card")
            } else {
                ths.parents().eq(3).addClass("flip-card")
            }
            $.ajax({
                type:"GET",
                url: "{% url 'random-refresh' %}",
                async: false,
                data: {
                    'random-unlearned': "refresh",
                },
                dataType: 'json',
                success: function(data) {
                    if (data.random_unlearned) {
                        var ref;
                        var quiz;
                        setTimeout(function() {
                            $(".ul-unlearned").empty();
                            $(".title-unl").css("z-index", "-1").html("")
                            ref = $(".ref-img-unl").detach()
                            $("button[data-target='#quiz-unl']").html("")
                        },700)
                        setTimeout(function() {
                            $(".title-unl").css("z-index", "initial").html("Öğreneceklerim")
                            $(".ref-unl").prepend(ref)
                            $("button[data-target='#quiz-unl']").html("Quiz")
                            data.random_unlearned.map(function(i) {
                                $(".ul-unlearned").append(`<li><a class="teal" href="/sözlük/q=${i}/">${i}</a></li>`);
                            });
                        },1900)
                    }
                }
            })
        }
        else if (ths.hasClass('ref-db')) {
            if (ths.parents().eq(3).hasClass("flip-card")) {
                ths.parents().eq(3).removeClass("flip-card")
            } else {
                ths.parents().eq(3).addClass("flip-card")
            }
            $.ajax({
                type:"GET",
                url: "{% url 'random-refresh' %}",
                async: false,
                data: {
                    'random-db': 'refresh',
                },
                dataType: 'json',
                success: function(data) {
                    if (data.random_db) {
                        var ref;
                        var quiz;
                        setTimeout(function() {
                            $(".ul-db").empty();
                            $(".title-db").css("z-index", "-1").html("")
                            ref = $(".ref-img-db").detach()
                            $("button[data-target='#quiz-db']").html("")
                        },700)
                        setTimeout(function() {
                            $(".title-db").css("z-index", "initial").html("Biliyor muydun?")
                            $(".ref-db").prepend(ref)
                            $("button[data-target='#quiz-db']").html("Quiz")
                            data.random_db.map(function(i) {
                                $(".ul-db").append(`<li><a class="teal" href="/sözlük/q=${i}/">${i}</a></li>`);
                            });
                        },1900)
                    }
                }
            })
        }
    })

    $("span.audio").click(function() {
        $(this).parent().next()[0].play()
    });

    $(".add-btn-home").on("click", function(){
        var ths = $(this)
        var no = ths.attr('data-id')
        var en = $("#word_" + no).text()
        var tr_list = []
        ths.parent().parent().prev().children().map(function(){
            tr_list.push($(this).text().toLowerCase().trim())
        })
        var audio = $("#au-" + no).attr("src")

        if ( !(isNaN(no)) ) {
            if (ths.find("span").html() == "Kelimeyi Ekle") {
                $.ajax({
                    type:"GET",
                    url: "/word_cd",
                    data:{
                       "word_en": en,
                       "tr": tr_list,
                       "audio": audio
                    },
                    success: function(data) {
                        stopNotif()
                        $(".notif").html("Kelime eklendi!").addClass("notif-show")
                        notifHide()
                        ths.toggleClass("btn-before btn-after")
                        ths.find("span").html("Kelime Eklendi")
                    }
                });

            } else if (ths.find("span").html() == "Kelime Eklendi") {
                $.ajax({
                     type:"GET",
                     url: "/word_cd",
                     data:{
                        "word_en": en,
                        "tr": tr_list,
                        "audio": audio
                     },
                     success: function(data) {
                        stopNotif()
                        $(".notif").html("Kelime silindi!").addClass("notif-show")
                        notifHide()
                        ths.toggleClass("btn-after btn-before")
                        ths.find("span").html("Kelimeyi Ekle")
                     }
                }); // end ajax
            } // end else if
        }
    });


}); // end ready
</script>

{% endblock %}